🐞 DGFS 버그 리포트 및 기술 부채 (Ver 4.4)

이 문서는 현재 DGFS 프로젝트에 존재하는 해결되지 않은 문제(버그)와 개선이 필요한 기술적 과제를 기록합니다.
새로운 세션 시작 시, 이 문서의 내용을 최우선으로 검토하여 컨텍스트를 동기화합니다.

---

### [BUG-001] '새로 시작' 기능 오작동 및 튜토리얼 반복 진입

- **상태(Status)**: OPEN
- **심각도(Severity)**: CRITICAL (핵심 게임 루프 차단)
- **요약(Summary)**: 로비에서 '새로 하기'를 선택하면, 의도된 일반 전투가 아닌 튜토리얼이 실행되며 보상(티켓 10개)이 반복적으로 누적됩니다.
- **재현 경로(Steps to Reproduce)**:
  1. `main.py`를 실행하여 게임을 시작합니다.
  2. 로비 화면에서 '새로 하기' 버튼을 클릭합니다.
  3. 확인 팝업에서 '예'를 클릭합니다.
- **기대 결과(Expected Result)**: `reset_run_state()`가 호출되어 인벤토리와 층수가 초기화되고, `init_db()`에 의해 기본 캐릭터 2명이 지급된 후, 1층 일반 전투가 시작되어야 합니다.
- **실제 결과(Actual Result)**: `battle.py`의 `init_party` 메서드에서 오류가 발생하여 `TUTORIAL` 모드로 강제 전환됩니다. 튜토리얼 클리어 시 보상이 누적 지급됩니다.
- **기술적 분석(Hypothesis)**: 어제 수정된 `battle.py`의 `init_party` 메서드 내 분기 처리 로직 또는 `main.py`의 `reset_run_state` 호출 시점/방식에 논리적 결함이 있을 것으로 추정됩니다. `init_db()`가 호출되기 전에 `BattleScene`이 생성되거나, DB 트랜잭션이 올바르게 커밋되지 않았을 가능성이 있습니다.